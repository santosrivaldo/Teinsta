{% extends "base.html" %}

{% block title %}N√£o Conformidades - ISO 27001{% endblock %}

{% block content %}
<div class="page-container">
    <div class="page-header">
        <h2>N√£o Conformidades</h2>
        <a href="{{ url_for('adicionar_nao_conformidade') }}" class="btn btn-primary">+ Nova N√£o Conformidade</a>
    </div>

    <div class="table-container">
        <table class="data-table">
            <thead>
                <tr>
                    <th>C√≥digo</th>
                    <th>T√≠tulo</th>
                    <th>Severidade</th>
                    <th>Status</th>
                    <th>Respons√°vel</th>
                    <th>Prazo</th>
                    <th>A√ß√µes</th>
                </tr>
            </thead>
            <tbody>
                {% for nc in nao_conformidades %}
                <tr>
                    <td><strong>{{ nc.codigo }}</strong></td>
                    <td>{{ nc.titulo }}</td>
                    <td>
                        <span class="badge severity-{{ nc.severidade.lower().replace(' ', '-') }}">
                            {{ nc.severidade }}
                        </span>
                    </td>
                    <td>
                        <span class="status-badge status-{{ nc.status.lower().replace(' ', '-') }}">
                            {{ nc.status }}
                        </span>
                    </td>
                    <td>{{ nc.responsavel or '-' }}</td>
                    <td>{{ nc.prazo or '-' }}</td>
                    <td>
                        <button class="btn-icon" onclick="viewNC({{ nc.id }})" title="Ver">üëÅÔ∏è</button>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

<style>
.severity-alta { background: #fee2e2; color: #991b1b; }
.severity-m√©dia { background: #fef3c7; color: #92400e; }
.severity-baixa { background: #d1fae5; color: #065f46; }
</style>
{% endblock %}
